(this["webpackJsonptournament-frontend"]=this["webpackJsonptournament-frontend"]||[]).push([[0],{181:function(e,t,a){e.exports=a(341)},186:function(e,t,a){},187:function(e,t,a){},341:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),l=a.n(c),o=(a(186),a(187),a(344)),s=a(130),u=a(350),i=a(346),d=a(39);function m(e){return{type:"SET_ACTION_REQUEST",payload:e}}function p(e){return{type:"CODE_TEST_RESULT",payload:e}}function E(e){return localStorage.setItem("debugger_settings",JSON.stringify(e)),{type:"SET_DEBUGGER_SETTINGS",payload:e}}function f(e){return{type:"SET_PAUSED",payload:e}}var y=a(65),g=a(15),S={nextAction:"",gameState:null,flow:{currentStep:0},paused:!1,debugger:localStorage.getItem("debugger_settings")?JSON.parse(localStorage.getItem("debugger_settings")):{speed:75,stateFilter:"ALL",renderGameState:!0,pauseOnTurn:!1},codeTest:{status:"SUCCESS",results:[]},editor:{playerCode:localStorage.getItem("playerCode")?localStorage.getItem("playerCode"):"\n/**\n * Is called in the beginning of a round if you are the first player.\n *\n * @param {object[]} handCards  The cards in the players hands\n * @param {object} gameState    The current state of the game\n * @returns {boolean}           If your team mate should choose the playing mode (\xabGschobe\xbb)\n */\nfunction decideShift(handCards, gameState) {\n    return false;\n}\n\n/**\n * This function chooses a playing mode. Following playing modes are valid:\n * \n * TOP_DOWN, BOTTOM_UP, TRUMP_HEARTS, TRUMP_SPADES, TRUMP_DIAMONDS, TRUMP_CLUBS\n *\n * @param {object[]} handCards  The cards in the players hands\n * @param {object} gameState    The current state of the game\n * @returns {string}            The playing mode for this round\n */\nfunction choosePlayingMode(handCards, gameState) {\n    return 'TRUMP_HEARTS';\n}\n\n/**\n * This function is called whenever your player starts a \xabStich\xbb. All hand cards can be played.\n * \n * @param {object[]} handCards  The cards in the players hands\n * @param {object} gameState    The current state of the game\n * @returns {object}            The card to play as first player\n */\nfunction startStich(handCards, gameState) {\n    return playCard(handCards, handCards, [], gameState);\n}\n\n/**\n * This function is called whenever your player needs to play. Only the playableCards can be played.\n * \n * @param {object[]} handCards      The cards in the players hands\n * @param {object[]} playableCards  The playable cards in the players hand\n * @param {object[]} tableStack     The cards laying on the table in correct order\n * @param {object} gameState        The current state of the game\n * @returns {object}                The card to play\n */\nfunction playCard(handCards, playableCards, tableStack, gameState) {\n    console.log('handCards', handCards);\n    console.log('playableCards', playableCards);\n    console.log('tableStack', tableStack);\n    console.log('gameState', gameState);\n    \n    return playableCards[0];\n}\n"}};var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PAUSED":return Object(g.a)(Object(g.a)({},e),{paused:t.payload});case"RUN_NEW_GAME":case"QUEUE_WEBSOCKET_MESSAGE":break;case"SET_DEBUGGER_SETTINGS":return Object(g.a)(Object(g.a)({},e),{debugger:t.payload});case"CODE_TEST_REQUEST":return Object(g.a)(Object(g.a)({},e),{codeTest:{status:"SUCCESS",results:[]}});case"CODE_TEST_RESULT":return Object(g.a)(Object(g.a)({},e),{codeTest:{status:t.payload.map((function(e){return void 0===e.error})).reduce((function(e,t){return e&&t}),!0)?"SUCCESS":"FAIL",results:t.payload}});case"SET_NEXT_FLOW_STEP":return Object(g.a)(Object(g.a)({},e),{flow:{currentStep:t.payload}});case"SET_ACTION_REQUEST":return Object(g.a)(Object(g.a)({},e),{actionRequest:t.payload});case"SET_ACTION_RESULT":return Object(g.a)(Object(g.a)({},e),{actionResult:t.payload});case"UPDATE_GAME_STATE":return Object(g.a)(Object(g.a)({},e),{gameState:t.payload});case"UPDATE_CODE":return Object(g.a)(Object(g.a)({},e),{editor:{playerCode:t.payload}});case"SET_CODE_ERROR":return Object(g.a)(Object(g.a)({},e),{editor:Object(g.a)(Object(g.a)({},e.editor),{playerCodeChanged:!1,error:t.payload})})}return e},b=a(178),v=a(44),T=a.n(v),O=a(160),_=a.n(O),x=new Map,j=function(e){return e.split("").reduce((function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e}),0)},C=function(e){var t=URL.createObjectURL(new Blob([e],{type:"text/javascript"}));return{url:t,worker:new Worker(t)}};function N(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(n){var r,c="".concat(e,"\n        var logFn = console.log;\n        console.clear();\n        \n        self.addEventListener('message', function(event) {\n            var log = [];\n        \n            console.log = (...args) => {\n                log.push({level: 'log', payload: args });\n                logFn('worker', ...args);\n            }\n        \n            var t0 = performance.now()\n            var result = eval(event.data.fn);\n            var t1 = performance.now()\n        \n            let execution;\n            var t0 = performance.now()\n            try {\n                var result = eval(event.data.fn);\n                \n                if (result === undefined || result === null) {\n                    throw new Error('Return value is ' + result);\n                }\n                \n                var t1 = performance.now()\n            \n                execution = { description: event.data.description, fn: event.data.fn, result: JSON.stringify(result), consoleOutput: log, executionTime: parseInt(t1 - t0) }\n            } catch (e) {\n                var t1 = performance.now()\n                execution = { description: event.data.description, fn: event.data.fn, error: e.message, consoleOutput: log, executionTime: parseInt(t1 - t0) }\n            }\n        \n            self.postMessage(execution);\n        }, false);");if(a){var l=j(c);x.has(l)||x.set(l,C(c)),r=x.get(l)}else r=C(c);var o=setTimeout((function(){u(),n(Object(g.a)(Object(g.a)({},t),{value:null,error:JSON.stringify({message:"Your code is too slow and timed out after 1000 ms"}),fn:e,executionTime:1e3}))}),1e3),s=function(){clearTimeout(o),a||(r.worker.terminate(),URL.revokeObjectURL(r.url))},u=function(){clearTimeout(o),x.delete(void 0),r.worker.terminate(),URL.revokeObjectURL(r.url)};r.worker.onmessage=function(e){s(),n(e.data)},r.worker.onerror=function(a){s(),void 0!==a.message&&n(Object(g.a)(Object(g.a)({},t),{value:null,error:a.message,fn:e,executionTime:0}))},r.worker.postMessage(t)}))}var w,A=a(28),k={websocketUrl:"/ws"},R=T.a.mark(M),P=T.a.mark(F),U=T.a.mark(L),D=T.a.mark(G),I=function(e){switch(e.action){case"DECIDE_SHIFT":return{description:"DECIDE_SHIFT",fn:"decideShift(".concat(JSON.stringify(e.handCards),",").concat(JSON.stringify(e.gameState),")")};case"SET_PLAYING_MODE":return{description:"SET_PLAYING_MODE",fn:"choosePlayingMode(".concat(JSON.stringify(e.handCards),",").concat(JSON.stringify(e.gameState),")")};case"START_STICH":return{description:"START_STICH",fn:"startStich(".concat(JSON.stringify(e.handCards),",").concat(JSON.stringify(e.gameState),")")};case"PLAY_CARD":return{description:"PLAY_CARD",fn:"playCard(".concat(JSON.stringify(e.handCards),",").concat(JSON.stringify(e.playableCards),",").concat(JSON.stringify(e.tableStack),",").concat(JSON.stringify(e.gameState),")")};default:throw new Error("Unknown action: ".concat(JSON.stringify(e)))}};function M(){var e,t,a,n;return T.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(A.a)("QUEUE_WEBSOCKET_MESSAGE");case 2:return e=r.sent,r.next=5,Object(A.a)("SET_PAUSED");case 5:t=r.sent;case 6:return r.next=9,Object(A.f)(e);case 9:a=r.sent.payload,n=0;case 11:return r.t0=n,r.next=14,Object(A.e)((function(e){return e.debugger.speed}));case 14:if(r.t1=r.sent,r.t2=100-r.t1,!(r.t0<r.t2)){r.next=22;break}return r.next=19,Object(A.c)(10);case 19:n++,r.next=11;break;case 22:return r.next=24,Object(A.e)((function(e){return e.paused}));case 24:if(!r.sent){r.next=29;break}return r.next=27,Object(A.f)(t);case 27:r.next=22;break;case 29:if("state"!==a.messageType){r.next=32;break}return r.next=32,Object(A.d)({type:"UPDATE_GAME_STATE",payload:a.payload});case 32:if("action-request"!==a.messageType){r.next=40;break}return r.next=35,Object(A.e)((function(e){return e.debugger.pauseOnTurn}));case 35:if(!r.sent){r.next=38;break}return r.next=38,Object(A.d)(f(!0));case 38:return r.next=40,Object(A.d)(m(a.payload));case 40:r.next=6;break;case 42:case"end":return r.stop()}}),R)}function F(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.g)("RUN_NEW_GAME",(function(e){w.sendMessage("/app/jass/new-game",e.payload)}));case 2:case"end":return e.stop()}}),P)}function L(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.g)("SET_ACTION_REQUEST",T.a.mark((function e(t){var a,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.e)((function(e){return e.editor.playerCode}));case 2:return a=e.sent,e.next=5,Object(A.b)(N,a,I(t.payload),!0);case 5:return n=e.sent,console.log(n),e.next=9,Object(A.d)({type:"SET_ACTION_RESULT",payload:n});case 9:case"end":return e.stop()}}),e)})));case 2:case"end":return e.stop()}}),U)}function G(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.g)("SET_ACTION_RESULT",(function(e){void 0!==e.payload.result&&w.sendMessage("/app/jass/action",JSON.stringify({actionType:e.payload.description,payload:JSON.parse(e.payload.result)}))}));case 2:case"end":return e.stop()}}),D)}var J=function(e){w=e},H=function(e){ee.dispatch({type:"QUEUE_WEBSOCKET_MESSAGE",payload:e})},W=function(){return r.a.createElement(_.a,{url:k.websocketUrl,topics:["/user/game"],onMessage:H,ref:J})},B=a(177),Y=a(354),z=a(356),K=a(352),Q=T.a.mark(X);function X(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.h)("UPDATE_CODE",T.a.mark((function e(t){var a,n,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=[{description:"decideShift() should return a boolean",fn:"typeof decideShift([], []) === 'boolean'"},{description:"choosePlayingMode() should return valid playing mode",fn:"['TOP_DOWN', 'BOTTOM_UP', 'TRUMP_HEARTS', 'TRUMP_SPADES', 'TRUMP_DIAMONDS', 'TRUMP_CLUBS'].includes(choosePlayingMode([], {}))"}],e.next=4,Object(A.d)(p([]));case 4:n=0;case 5:if(!(n<a.length)){e.next=24;break}return e.next=8,Object(A.e)((function(e){return e.codeTest.results}));case 8:return r=e.sent,e.t0=A.d,e.t1=p,e.t2=[],e.t3=Object(B.a)(r),e.next=15,Object(A.b)(N,t.payload,a[n],!0);case 15:return e.t4=e.sent,e.t5=[e.t4],e.t6=e.t2.concat.call(e.t2,e.t3,e.t5),e.t7=(0,e.t1)(e.t6),e.next=21,(0,e.t0)(e.t7);case 21:n++,e.next=5;break;case 24:e.next=30;break;case 26:return e.prev=26,e.t8=e.catch(0),e.next=30,Object(A.d)(p([{description:"Syntax error",fn:t.payload,executionTime:0,error:JSON.stringify(e.t8)}]));case 30:case"end":return e.stop()}}),e,null,[[0,26]])})));case 2:case"end":return e.stop()}}),Q)}var V=Object(d.b)((function(e){return{code:e.editor.playerCode,test:e.codeTest}}))((function(e){var t=e.test.results.map((function(e){var t,a;return void 0!==e.error||"true"!==e.result?(t=r.a.createElement(Y.a,{message:"Failed",description:e.description,type:"error",showIcon:!0}),a="error"):(t=r.a.createElement(Y.a,{message:"Success",description:e.description,type:"success",showIcon:!0}),a="success"),r.a.createElement(z.a,{placement:"bottom",key:e.description,content:t},r.a.createElement(K.a,{status:a}))})),a=e.test.results.map((function(e){return e.executionTime})).reduce((function(e,t){return e+t}),0),n=Math.min(200,a/1e3*255+80),c=Math.min(200,255*(1-a/1e3)+80);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{paddingRight:"10px",whiteSpace:"nowrap"}},t,r.a.createElement("span",{style:{fontWeight:"bold",color:"rgb(".concat(n,", ").concat(c,", 26)")}},a," ms")))})),Z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||y.c,q=Object(b.a)(),$=Object(y.d)(h,Z(Object(y.a)(q)));q.run(F),q.run(L),q.run(G),q.run(X),q.run(M);var ee=$,te=a(168),ae=a.n(te),ne=a(128),re=(a(318),a(319),a(351)),ce=a(355),le=a(358),oe=a(353),se=a(348),ue=a(347),ie=a(345),de=a(357),me=a(343),pe=a(176),Ee=a(106),fe=a.n(Ee),ye=function(e){return r.a.createElement("div",null,r.a.createElement(fe.a,{theme:"grayscale:inverted",iconStyle:"triangle",indentWidth:2,style:{display:"inline-block"},name:e.name,collapsed:e.collapsed,enableClipboard:!1,displayObjectSize:!1,displayDataTypes:!1,src:e.object}))},ge=Object(d.b)((function(e){return{code:e.editor.playerCode,actionResult:e.actionResult}}))((function(e){if(console.log(e.actionResult),void 0===e.actionResult)return r.a.createElement("div",null,"Game hast not started yet.");for(var t,a=e.actionResult.fn.match(/([a-zA-Z_{1}][a-zA-Z0-9_]+)(?=\()/g)[0],n=JSON.parse("[".concat(e.actionResult.fn.match(/\b[^()]+\((.*)\)$/)[1],"]")),c=Object(pe.a)(/function[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+([0-9A-Z_a-z]+)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\(((?:(?:(?![\(\)])[\s\S])+)*)?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\)/g,{name:1,arguments:2}),l=[];t=c.exec(e.code);)l.push(t.groups);var o,s=l.find((function(e){return e.name===a})).arguments.split(",").map((function(e){return e.trim()}));return void 0!==e.actionResult.result&&(o="object"===typeof JSON.parse(e.actionResult.result)?r.a.createElement(ye,{name:"result",object:JSON.parse(e.actionResult.result)}):r.a.createElement("span",{style:{fontFamily:"monospace"}},e.actionResult.result)),r.a.createElement("div",null,r.a.createElement(ce.a,null,r.a.createElement(le.a,{span:18},r.a.createElement("h3",null,"Next move"),r.a.createElement("span",{style:{fontFamily:"monospace"}},a,"(",s.join(", "),");")),r.a.createElement(le.a,{span:6,style:{textAlign:"right"}},r.a.createElement("h3",null,"Execution time"),r.a.createElement("span",{style:{fontFamily:"monospace"}},e.actionResult.executionTime," ms"))),r.a.createElement(me.a,null),r.a.createElement(ce.a,null,r.a.createElement(le.a,{span:24},r.a.createElement("h3",null,"Function call"),r.a.createElement("pre",null,a),!!e.actionResult.fn&&n.map((function(e,t){return r.a.createElement("div",{key:t,style:{paddingLeft:"20px"}},r.a.createElement(fe.a,{theme:"grayscale:inverted",iconStyle:"triangle",indentWidth:2,style:{display:"inline-block"},name:s[t],collapsed:!0,enableClipboard:!1,displayObjectSize:!1,displayDataTypes:!1,src:e}))})),r.a.createElement("pre",null,");"))),r.a.createElement(me.a,null),r.a.createElement(ce.a,null,e.actionResult.result&&r.a.createElement(le.a,{span:12},r.a.createElement("h3",null,"Result"),o),e.actionResult.error&&r.a.createElement(le.a,{span:24},r.a.createElement("h3",null,"Error"),e.actionResult.error)))})),Se=function(e){var t=e.logs.map((function(e){var t=e.payload;return 2===t.length&&"string"===typeof t[0]&&"object"===typeof t[1]?r.a.createElement(ye,{name:t[0],object:t[1],collapsed:2}):t.map((function(e,t){switch(typeof e){case"object":return r.a.createElement("span",{key:t},r.a.createElement(ye,{name:null,object:e,collapsed:2}),"\xa0");default:return r.a.createElement("span",{key:t,style:{fontFamily:"monospace"}},e,"\xa0")}}))}));return 0===t.length?r.a.createElement("div",null,"-"):t.length>100?r.a.createElement("div",null,"Too many logs."):r.a.createElement("div",null,t.map((function(e,t){return r.a.createElement("div",{key:t},e,r.a.createElement(me.a,null))})))},he=function(e){var t=e.cards.filter((function(t){return t.team===e.team.name}));return r.a.createElement("div",{className:"team-stack stack"},t.map((function(e,t){return r.a.createElement("div",{key:t,className:"card-wrapper",style:{top:"calc(0px + ".concat(.25*t,"px)"),left:"calc(-35px + ".concat(.25*t,"px)")}},r.a.createElement(Oe,null))})))},be=function(e){var t=e.cards.filter((function(e){return e.playOrder>0&&!e.team})).sort((function(e,t){return e.playOrder-t.playOrder})),a=[e.teams[0].players[0],e.teams[1].players[0],e.teams[0].players[1],e.teams[1].players[1]].indexOf(t.length>0?t[0].player:e.nextPlayer),n=t.map((function(e,t){return r.a.createElement("div",{key:JSON.stringify(e.card),className:"card-wrapper",style:{transform:"rotate(calc(180deg + ".concat(-90*a,"deg - ").concat(90*t,"deg)")}},r.a.createElement(_e,{card:e.card,top:"-35px"}))}));return r.a.createElement("div",{className:"table-stack stack"},n)},ve=function(e){var t=9-e.cards.filter((function(t){return t.player===e.player})).length;return r.a.createElement("div",{className:"other-player-hand hand",style:{opacity:e.nextPlayer===e.player?1:.5}},Array.from(Array(t)).map((function(e,a){return r.a.createElement("div",{key:a,className:"card-wrapper",style:{top:"calc(-49px)",left:"calc(-35px + ".concat(10*(a-(t-1)/2),"px)"),transformOrigin:"50% 50%",transform:"rotate(".concat(10*(a-(t-1)/2),"deg)")}},r.a.createElement(Oe,null))})))},Te=function(e){var t=e.cards.filter((function(t){return t.player===e.playerName&&void 0===t.playOrder})).sort((function(e,t){return e.points-t.points})).sort((function(e,t){return e.card.suit<t.card.suit?1:-1})),a=t.length,n=t.map((function(e,t){return r.a.createElement("div",{key:t,className:"card-wrapper",style:{top:"calc(-49px)",left:"calc(-35px + ".concat(10*(t-(a-1)/2),"px)"),transformOrigin:"50% 50%",transform:"rotate(".concat(10*(t-(a-1)/2),"deg)")}},r.a.createElement(_e,{card:e.card}))}));return r.a.createElement("div",{className:"player-hand hand",style:{opacity:e.nextPlayer===e.playerName?1:.5}},n)},Oe=function(){return r.a.createElement("div",{className:"card unknown",style:{backgroundImage:"url(./cards/card_back.svg)"}})},_e=function(e){return r.a.createElement("div",{className:"card",style:{top:"string"===typeof e.top?e.top:"0px",backgroundImage:"url(./cards/".concat(e.card.suit,"_").concat(e.card.color,".svg)")}})},xe=Object(d.b)((function(e){return{gameState:e.gameState}}))((function(e){return console.log(e),null===e.gameState?r.a.createElement("div",null,"Game has not started yet."):r.a.createElement("div",{className:"jass-table",style:{backgroundImage:'url("fabric.jpg")'}},r.a.createElement("div",{className:"col"},r.a.createElement("div",null)),r.a.createElement("div",{className:"col"},r.a.createElement("div",{style:{transform:"rotate(180deg)"}},r.a.createElement(ve,{cards:e.gameState.cards,player:e.gameState.teams[0].players[1],nextPlayer:e.gameState.nextPlayer}))),r.a.createElement("div",{className:"col"},r.a.createElement("div",{style:{transform:"rotate(-90deg)"}},r.a.createElement(he,{cards:e.gameState.cards,team:e.gameState.teams[1]}))),r.a.createElement("div",{className:"col"},r.a.createElement("div",{style:{transform:"rotate(90deg)"}},r.a.createElement(ve,{cards:e.gameState.cards,player:e.gameState.teams[1].players[1],nextPlayer:e.gameState.nextPlayer}))),r.a.createElement("div",{className:"col"},r.a.createElement("div",null,r.a.createElement(be,{cards:e.gameState.cards,nextPlayer:e.gameState.nextPlayer,teams:e.gameState.teams}))),r.a.createElement("div",{className:"col"},r.a.createElement("div",{style:{transform:"rotate(-90deg)"}},r.a.createElement(ve,{cards:e.gameState.cards,player:e.gameState.teams[1].players[0],nextPlayer:e.gameState.nextPlayer}))),r.a.createElement("div",{className:"col"}),r.a.createElement("div",{className:"col"},r.a.createElement("div",null,r.a.createElement(Te,{cards:e.gameState.cards,nextPlayer:e.gameState.nextPlayer,playerName:e.gameState.playerName}))),r.a.createElement("div",{className:"col"},r.a.createElement(he,{cards:e.gameState.cards,team:e.gameState.teams[0]})))})),je=Object(d.b)((function(e){return{gameState:e.gameState,renderView:e.debugger.renderGameState}}))((function(e){var t=e.gameState?r.a.createElement("div",null,r.a.createElement(ce.a,null,r.a.createElement(le.a,{span:12},r.a.createElement("h3",null,"Points Team 1 (you)"),e.gameState.teams[0].points),r.a.createElement(le.a,{span:12},r.a.createElement("h3",null,"Points Team 2"),e.gameState.teams[1].points)),r.a.createElement("br",null),r.a.createElement(ce.a,null,r.a.createElement(le.a,{span:12},r.a.createElement("h3",null,"Next action"),function(e){switch(e.nextAction){case"START_ROUND":return"Start round";case"DECIDE_SHIFT":return"Decide shift";case"SET_STARTING_PLAYER":return"Set starting player";case"SET_PLAYING_MODE":return"Choose playing mode";case"PLAY_CARD":return"Play card";case"START_GAME":return"Start game";case"HAND_OUT_CARDS":return"Hand out cards";case"START_STICH":return"Start stich";case"END_STICH":return"End stich";case"END_ROUND":return"End round";case"END_GAME":case"EXIT":return"Game ended";default:return""}}(e.gameState)),r.a.createElement(le.a,{span:12},r.a.createElement("h3",null,"Next player"),function(e){switch(e.teams.flatMap((function(e){return e.players})).indexOf(e.nextPlayer)){case 0:return"Team 1 / You";case 1:return"Team 1 / Player-2";case 2:return"Team 2 / Player-3";case 3:return"Team 2 / Player-4";default:return"-"}}(e.gameState))),r.a.createElement("br",null),r.a.createElement(ce.a,null,r.a.createElement(le.a,{span:12},r.a.createElement("h3",null,"Trump"),function(e){switch(e.playingMode){case"TOP_DOWN":return"Top down";case"BOTTOM_UP":return"Bottom up";case"TRUMP_SPADES":return"Spades";case"TRUMP_CLUBS":return"Clubs";case"TRUMP_HEARTS":return"Hearts";case"TRUMP_DIAMOND":return"Diamond";default:return"-"}}(e.gameState)),r.a.createElement(le.a,{span:12},r.a.createElement("h3",null,"Step"),e.gameState.revision))):r.a.createElement("div",null,"Game has not started yet.");return r.a.createElement("div",null,t)})),Ce=se.a.Panel,Ne=ue.a.Option,we=Object(d.b)((function(e){return e}))((function(e){var t,a=(null===(t=e.actionResult)||void 0===t?void 0:t.consoleOutput)||[],n=r.a.createElement("div",{style:{width:"100%"}},"Debugger",e.paused&&r.a.createElement("span",{style:{float:"right"}},r.a.createElement(K.a,{offset:[0,-3],count:1}))),c=r.a.createElement("div",{style:{width:"100%"}},"Console",e.paused&&r.a.createElement("span",{style:{float:"right"}},r.a.createElement(K.a,{offset:[0,-3],count:a.length}))),l=r.a.createElement("div",{style:{width:"100%"}},"State",!!e.gameState&&r.a.createElement("span",{style:{float:"right"}},r.a.createElement(K.a,{style:{backgroundColor:"#4a4a4a"},overflowCount:1e3,offset:[0,-3],count:e.gameState.revision})));return r.a.createElement("div",null,r.a.createElement(oe.a,{offsetTop:0},r.a.createElement("div",{style:{height:"calc(100vh)",overflowY:"scroll"}},r.a.createElement(se.a,{defaultActiveKey:["board","state"]},r.a.createElement(Ce,{header:"Board",key:"board"},r.a.createElement(xe,null)),r.a.createElement(Ce,{header:l,key:"state"},r.a.createElement(je,null)),r.a.createElement(Ce,{header:"Debug settings",key:"settings"},r.a.createElement(ce.a,null,r.a.createElement(le.a,{span:12},r.a.createElement("h3",null,"Speed ",e.debugger.speed),r.a.createElement("div",{style:{paddingRight:"20px"}},r.a.createElement(ie.a,{value:e.debugger.speed,onChange:function(t){return function(e,t){ee.dispatch(E(Object(g.a)(Object(g.a)({},e),{speed:t})))}(e.debugger,t)}}))),r.a.createElement(le.a,{span:12},r.a.createElement("h3",null,"Debug"),r.a.createElement(de.a,{checked:e.debugger.pauseOnTurn,onChange:function(t){return function(e,t){ee.dispatch(E(Object(g.a)(Object(g.a)({},e),{pauseOnTurn:t})))}(e.debugger,t)}})," Debug moves")),r.a.createElement(me.a,null),r.a.createElement(ce.a,null,r.a.createElement(le.a,{span:12},r.a.createElement("h3",null,"Filter moves"),r.a.createElement(ue.a,{style:{width:"100%"},labelInValue:!0,defaultValue:{value:e.debugger.stateFilter},onChange:function(t){return function(e,t){ee.dispatch(E(Object(g.a)(Object(g.a)({},e),{stateFilter:t})))}(e.debugger,t.value)}},r.a.createElement(Ne,{value:"ALL"},"All moves"),r.a.createElement(Ne,{value:"PLAYER_ONLY"},"Your moves only"))),r.a.createElement(le.a,{span:12}))),r.a.createElement(Ce,{header:n,key:"debugger"},r.a.createElement(ge,null)),r.a.createElement(Ce,{header:c,key:"console"},r.a.createElement(Se,{logs:a}))))))})),Ae=a(114),ke=a(349),Re=function(e){ee.dispatch({type:"RUN_NEW_GAME",payload:JSON.stringify({name:"asdf",filter:e})})},Pe=function(){ee.dispatch(f(!1))},Ue=Object(d.b)((function(e){var t;return{filter:e.debugger.stateFilter,nextAction:null===(t=e.gameState)||void 0===t?void 0:t.nextAction,paused:e.paused,codeTestState:e.codeTest.status}}))((function(e){var t="EXIT"!==e.nextAction&&void 0!==e.nextAction;return Object(n.useEffect)((function(){var t=function(t){return function(e,t){119===e.keyCode&&(e.preventDefault(),t.paused?Pe():Re(t.filter))}(t,e)};return document.addEventListener("keydown",t,!1),function(){document.removeEventListener("keydown",t)}})),r.a.createElement("div",null,!e.paused&&r.a.createElement(Ae.a,{type:"primary",disabled:"FAIL"===e.codeTestState,icon:r.a.createElement(ke.a,null),loading:t,onClick:function(){return Re(e.filter)}},!t&&r.a.createElement("span",null,"Run (F8)"),t&&r.a.createElement("span",null,"Running...")),e.paused&&r.a.createElement(Ae.a,{type:"primary",icon:r.a.createElement(ke.a,null),onClick:function(){return Pe()}},"Step (F8)"))})),De=function(e){ee.dispatch({type:"UPDATE_CODE",payload:e})},Ie=function(e){83===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&(e.preventDefault(),localStorage.setItem("playerCode",ee.getState().editor.playerCode),re.b.success("Saved your code in local storage."))},Me=Object(d.b)((function(e){return e.editor}))((function(e){return Object(n.useEffect)((function(){return document.addEventListener("keydown",Ie,!1),function(){document.removeEventListener("keydown",Ie)}})),r.a.createElement("div",null,r.a.createElement(W,null),r.a.createElement(ce.a,null,r.a.createElement(le.a,{span:24})),r.a.createElement(ce.a,null,r.a.createElement(le.a,{span:14},r.a.createElement("div",{style:{position:"absolute",zIndex:10,right:16,top:16,width:"100%",textAlign:"center"}},r.a.createElement(oe.a,{offsetTop:16},r.a.createElement("div",{style:{position:"absolute",right:0}},r.a.createElement(Ue,null)),r.a.createElement("div",{style:{display:"inline-block",paddingTop:"4px"}},r.a.createElement(V,null)))),r.a.createElement(ae.a,{value:e.playerCode,onValueChange:De,highlight:function(e){return Object(ne.highlight)(e,ne.languages.js)},padding:20,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:16},className:"container__editor"})),r.a.createElement(le.a,{span:10},r.a.createElement(we,null))))})),Fe=i.a.Step,Le=Object(d.b)((function(e){return e}))((function(e){var t=e.flow.currentStep,a=[r.a.createElement(Me,null),r.a.createElement("div",null,"This feature is not finished yet."),r.a.createElement("div",null,"This feature is not finished yet.")];return r.a.createElement("div",null,r.a.createElement(i.a,{current:e.flow.currentStep,onChange:function(e){ee.dispatch({type:"SET_NEXT_FLOW_STEP",payload:e})}},r.a.createElement(Fe,{title:"Code & Test",description:"Code your strategy"}),r.a.createElement(Fe,{title:"Play Game",description:"Run against others"}),r.a.createElement(Fe,{title:"Submit",description:"Submit your strategy"})),r.a.createElement("br",null),a[t])})),Ge=o.a.Header,Je=o.a.Content;var He=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(o.a,null,r.a.createElement(Ge,{className:"header"},r.a.createElement("div",{className:"logo"}),r.a.createElement(s.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"]},r.a.createElement(s.a.Item,{key:"1"},"nav 1"),r.a.createElement(s.a.Item,{key:"2"},"nav 2"),r.a.createElement(s.a.Item,{key:"3"},"nav 3"))),r.a.createElement(o.a,null,r.a.createElement(o.a,{style:{padding:"0 24px 24px"}},r.a.createElement(u.a,{style:{margin:"16px 0"}},r.a.createElement(u.a.Item,null,"Home"),r.a.createElement(u.a.Item,null,"List"),r.a.createElement(u.a.Item,null,"App")),r.a.createElement(Je,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280}},r.a.createElement(Le,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(d.a,{store:ee},r.a.createElement(He,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[181,1,2]]]);
//# sourceMappingURL=main.29b08cc7.chunk.js.map